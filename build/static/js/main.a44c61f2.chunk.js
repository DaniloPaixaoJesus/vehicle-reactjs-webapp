(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),l=(a(65),a(9)),s=a.n(l),o=a(14),u=a(26),m=a(27),p=a(30),h=a(28),v=a(31),d=a(29),f=a.n(d);var E=function(e){var t=e.infos;return r.a.createElement("div",{className:"card-list"},t&&t.map(function(e,t){var a="online";return"OFF"===e.status&&(a="offline"),r.a.createElement("div",{className:"card "+a,key:t},r.a.createElement("ul",{className:"infos"},r.a.createElement("li",null,r.a.createElement("h5",null,"VIN"),r.a.createElement("p",null,e.vin)),r.a.createElement("li",null,r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.regNumber)),r.a.createElement("li",{className:"status"},r.a.createElement("span",null,a))))}))},g=function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://SERVER:8081/api/v1/vehicles",{headers:{"Access-Control-Allow-Origin":"*"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.vehicleList);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=a(18),O=(a(105),[]),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={items:[],owner:""},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.getAllVehicles()}},{key:"getAllVehicles",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:(t=e.sent).forEach(function(e){O.push(e)}),this.setState({isLoaded:!0,items:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e){var t=this.state.items.map(function(t){return t.vin==e.vin&&(t.status=e.status),t});this.setState({items:t})}},{key:"handleOnChange",value:function(e){var t=e.target.value,a=[].concat(O).filter(function(e){return"TODOS"==t?e:e.status===t?e:void 0});this.setState({items:a})}},{key:"handleOnChangeOwner",value:function(e){var t=e.target.value,a=[].concat(O).filter(function(e){return""==t?e:e.driverName.toLowerCase().includes(t.toLowerCase())?e:void 0});this.setState({items:a})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.error,t.isLoaded,t.items);t.vin;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{name:"car-filter",className:"car-filter"},r.a.createElement("div",{className:"MapView-button"},r.a.createElement(w.b,{to:"/map"},"MapView")),r.a.createElement("div",{className:"group"},r.a.createElement("label",{htmlFor:"owner"},"Owner: "),r.a.createElement("input",{name:"owner",onChange:function(t){return e.handleOnChangeOwner(t)}})),r.a.createElement("div",{className:"group"},r.a.createElement("label",{htmlFor:"status"},"Status: "),r.a.createElement("select",{name:"status",onChange:function(t){return e.handleOnChange(t)}},r.a.createElement("option",{value:"TODOS",defaultValue:!0},"TODOS"),r.a.createElement("option",{value:"OFF"},"OFFLINE"),r.a.createElement("option",{value:"ON"},"ONLINE")))))),r.a.createElement("section",{className:"car-infos"},r.a.createElement("div",{className:"container"},r.a.createElement(E,{infos:a}))),r.a.createElement(f.a,{url:"http://SERVER:8085/livestatus-websocket",topics:["/topic/status"],onMessage:function(t){e.updateData(t)}}))}}]),t}(r.a.Component),b=a(32),y=(a(123),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).displayMarkers=function(){return a.state.vehicles.map(function(e,t){return console.log("displayMarkers=>",e),r.a.createElement(b.Marker,{key:t,id:t,position:{lat:e.latitude,lng:e.longitude},onClick:function(){return console.log("You clicked me!=>",e.vin)}})})},a.state={vehicles:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getAllVehicles()}},{key:"getAllVehicles",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,a=t.map(function(e,t){return{vin:e.vin,latitude:e.geolocation.latitude,longitude:e.geolocation.longitude}}),n=Array.from(a),this.setState({vehicles:n});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateData",value:function(e){var t=this.state.vehicles.map(function(t){return console.log(t),t.vin==e.vin&&(t.latitude=e.geolocation.latitude,t.longitude=e.geolocation.longitude),t});this.setState({vehicles:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"MapView"},r.a.createElement("header",{className:"MapView-header"},r.a.createElement("div",{className:"MapView-menu"},r.a.createElement(w.b,{to:"/"},"Back to List View"))),r.a.createElement(b.Map,{google:this.props.google,zoom:12,style:N,initialCenter:{lat:-23.508956,lng:-46.832757}},this.displayMarkers()),r.a.createElement(f.a,{url:"http://SERVER:8085/livestatus-websocket",topics:["/topic/status"],onMessage:function(t){e.updateData(t)}}))}}]),t}(n.Component)),N={width:"100%",height:"100%"},j=Object(b.GoogleApiWrapper)({apiKey:"AIzaSyDs9oS-kNoB93IijBzs3Hi6-wRa3enszVA"})(y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(13);c.a.render(r.a.createElement(w.a,null,r.a.createElement(V.c,null,r.a.createElement(V.a,{path:"/",exact:!0,component:k}),r.a.createElement(V.a,{path:"/map",component:j}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,a){e.exports=a(124)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.a44c61f2.chunk.js.map